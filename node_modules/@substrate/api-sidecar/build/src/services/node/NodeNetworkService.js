"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NodeNetworkService = void 0;
const AbstractService_1 = require("../AbstractService");
class NodeNetworkService extends AbstractService_1.AbstractService {
    async fetchNetwork() {
        const [{ peers: numPeers, isSyncing, shouldHavePeers }, localPeerId, nodeRoles, localListenAddresses,] = await Promise.all([
            this.api.rpc.system.health(),
            this.api.rpc.system.localPeerId(),
            this.api.rpc.system.nodeRoles(),
            this.api.rpc.system.localListenAddresses(),
        ]);
        let peersInfo;
        try {
            peersInfo = await this.api.rpc.system.peers();
        }
        catch (_a) {
            peersInfo = 'Cannot query system_peers from node.';
        }
        return {
            nodeRoles,
            numPeers,
            isSyncing,
            shouldHavePeers,
            localPeerId,
            localListenAddresses,
            peersInfo,
        };
    }
}
exports.NodeNetworkService = NodeNetworkService;
//# sourceMappingURL=NodeNetworkService.js.map