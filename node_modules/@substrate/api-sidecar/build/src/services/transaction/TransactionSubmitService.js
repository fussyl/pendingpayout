"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TransactionSubmitService = void 0;
const AbstractService_1 = require("../AbstractService");
const extractCauseAndStack_1 = require("./extractCauseAndStack");
class TransactionSubmitService extends AbstractService_1.AbstractService {
    /**
     * Submit a fully formed SCALE-encoded extrinsic for block inclusion.
     *
     * @param extrinsic scale encoded extrinsic to submit
     */
    async submitTransaction(transaction) {
        const { api } = this;
        let tx;
        try {
            tx = api.tx(transaction);
        }
        catch (err) {
            const { cause, stack } = extractCauseAndStack_1.extractCauseAndStack(err);
            throw {
                error: 'Failed to parse transaction.',
                transaction,
                cause,
                stack,
            };
        }
        try {
            const hash = await api.rpc.author.submitExtrinsic(tx);
            return {
                hash,
            };
        }
        catch (err) {
            const { cause, stack } = extractCauseAndStack_1.extractCauseAndStack(err);
            throw {
                error: 'Failed to submit transaction.',
                transaction,
                cause,
                stack,
            };
        }
    }
}
exports.TransactionSubmitService = TransactionSubmitService;
//# sourceMappingURL=TransactionSubmitService.js.map